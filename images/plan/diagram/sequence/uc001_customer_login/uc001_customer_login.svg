<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="763px" preserveAspectRatio="none" style="width:872px;height:763px;background:#FFFFFF;" version="1.1" viewBox="0 0 872 763" width="872px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="327" x="271.75" y="29.4023">UC002: 顧客ログイン機能 シーケンス図</text><rect fill="#FFFFFF" height="532.9004" style="stroke:#A80036;stroke-width:1.0;" width="10" x="24" y="129.6875"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="136" y="150.998"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="247.5" y="633.2773"/><rect fill="#FFFFFF" height="394.3477" style="stroke:#A80036;stroke-width:1.0;" width="10" x="356" y="209.6191"/><rect fill="#FFFFFF" height="251.1055" style="stroke:#A80036;stroke-width:1.0;" width="10" x="524" y="238.9297"/><rect fill="#FFFFFF" height="87.9316" style="stroke:#A80036;stroke-width:1.0;" width="10" x="670" y="283.5508"/><rect fill="#FFFFFF" height="44.6211" style="stroke:#A80036;stroke-width:1.0;" width="10" x="769" y="400.793"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="842.5" y="312.8613"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="29" x2="29" y1="119.6875" y2="680.5879"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="140.5" x2="140.5" y1="119.6875" y2="680.5879"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="252.5" x2="252.5" y1="119.6875" y2="680.5879"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="360.5" x2="360.5" y1="119.6875" y2="680.5879"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="528.5" x2="528.5" y1="119.6875" y2="680.5879"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="674.5" x2="674.5" y1="119.6875" y2="680.5879"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="773.5" x2="773.5" y1="119.6875" y2="680.5879"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="847.5" x2="847.5" y1="119.6875" y2="680.5879"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="5" y="116.7344">ユーザ</text><ellipse cx="29" cy="50.1992" fill="#FEFECE" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M29,58.1992 L29,85.1992 M16,66.1992 L42,66.1992 M29,85.1992 L16,100.1992 M29,85.1992 L42,100.1992 " fill="none" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="5" y="693.123">ユーザ</text><ellipse cx="29" cy="706.0762" fill="#FEFECE" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M29,714.0762 L29,741.0762 M16,722.0762 L42,722.0762 M29,741.0762 L16,756.0762 M29,741.0762 L42,756.0762 " fill="none" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="119" x="81.5" y="71.7109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="88.5" y="92.2461">CustomerLogin</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="106" y="108.7344">Controller</text><rect fill="#FEFECE" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="119" x="81.5" y="679.5879"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="88.5" y="700.123">CustomerLogin</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="106" y="716.6113">Controller</text><rect fill="#FEFECE" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="84" x="210.5" y="71.7109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27" x="239" y="92.2461">Top</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="217.5" y="108.7344">Controller</text><rect fill="#FEFECE" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="84" x="210.5" y="679.5879"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27" x="239" y="700.123">Top</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="217.5" y="716.6113">Controller</text><rect fill="#FEFECE" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="113" x="304.5" y="88.1992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="311.5" y="108.7344">SpringSecurity</text><rect fill="#FEFECE" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="113" x="304.5" y="679.5879"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="311.5" y="700.123">SpringSecurity</text><rect fill="#FEFECE" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="139" x="459.5" y="71.7109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="495.5" y="92.2461">Customer</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="466.5" y="108.7344">UserDetailsService</text><rect fill="#FEFECE" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="139" x="459.5" y="679.5879"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="495.5" y="700.123">Customer</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="466.5" y="716.6113">UserDetailsService</text><rect fill="#FEFECE" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="87" x="631.5" y="71.7109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="641.5" y="92.2461">Customer</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="638.5" y="108.7344">Repository</text><rect fill="#FEFECE" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="87" x="631.5" y="679.5879"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="641.5" y="700.123">Customer</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="638.5" y="716.6113">Repository</text><rect fill="#FEFECE" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="91" x="728.5" y="71.7109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="740.5" y="92.2461">Customer</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="735.5" y="108.7344">UserDetails</text><rect fill="#FEFECE" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="91" x="728.5" y="679.5879"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="740.5" y="700.123">Customer</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="735.5" y="716.6113">UserDetails</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="18" x="835.5" y="116.7344">DB</text><path d="M829.5,67.1992 C829.5,57.1992 847.5,57.1992 847.5,57.1992 C847.5,57.1992 865.5,57.1992 865.5,67.1992 L865.5,93.1992 C865.5,103.1992 847.5,103.1992 847.5,103.1992 C847.5,103.1992 829.5,103.1992 829.5,93.1992 L829.5,67.1992 " fill="#FEFECE" style="stroke:#000000;stroke-width:1.5;"/><path d="M829.5,67.1992 C829.5,77.1992 847.5,77.1992 847.5,77.1992 C847.5,77.1992 865.5,77.1992 865.5,67.1992 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="18" x="835.5" y="693.123">DB</text><path d="M829.5,706.0762 C829.5,696.0762 847.5,696.0762 847.5,696.0762 C847.5,696.0762 865.5,696.0762 865.5,706.0762 L865.5,732.0762 C865.5,742.0762 847.5,742.0762 847.5,742.0762 C847.5,742.0762 829.5,742.0762 829.5,732.0762 L829.5,706.0762 " fill="#FEFECE" style="stroke:#000000;stroke-width:1.5;"/><path d="M829.5,706.0762 C829.5,716.0762 847.5,716.0762 847.5,716.0762 C847.5,716.0762 865.5,716.0762 865.5,706.0762 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><rect fill="#FFFFFF" height="532.9004" style="stroke:#A80036;stroke-width:1.0;" width="10" x="24" y="129.6875"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="136" y="150.998"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="247.5" y="633.2773"/><rect fill="#FFFFFF" height="394.3477" style="stroke:#A80036;stroke-width:1.0;" width="10" x="356" y="209.6191"/><rect fill="#FFFFFF" height="251.1055" style="stroke:#A80036;stroke-width:1.0;" width="10" x="524" y="238.9297"/><rect fill="#FFFFFF" height="87.9316" style="stroke:#A80036;stroke-width:1.0;" width="10" x="670" y="283.5508"/><rect fill="#FFFFFF" height="44.6211" style="stroke:#A80036;stroke-width:1.0;" width="10" x="769" y="400.793"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="842.5" y="312.8613"/><polygon fill="#A80036" points="124,146.998,134,150.998,124,154.998,128,150.998" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="34" x2="130" y1="150.998" y2="150.998"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="38" x="41" y="146.2559">form()</text><polygon fill="#A80036" points="45,176.3086,35,180.3086,45,184.3086,41,180.3086" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="39" x2="140" y1="180.3086" y2="180.3086"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="51" y="175.5664">ログイン画面</text><polygon fill="#A80036" points="344,205.6191,354,209.6191,344,213.6191,348,209.6191" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="34" x2="350" y1="209.6191" y2="209.6191"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="41" y="204.877">認証</text><polygon fill="#A80036" points="512,234.9297,522,238.9297,512,242.9297,516,238.9297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="366" x2="518" y1="238.9297" y2="238.9297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="373" y="234.1875">loadUserByUsername()</text><polygon fill="#A80036" points="658,279.5508,668,283.5508,658,287.5508,662,283.5508" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="534" x2="664" y1="283.5508" y2="283.5508"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="541" y="263.498">findByUserName</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="541" y="278.8086">(userName)</text><polygon fill="#A80036" points="830.5,308.8613,840.5,312.8613,830.5,316.8613,834.5,312.8613" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="680" x2="836.5" y1="312.8613" y2="312.8613"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="687" y="308.1191">SELECT文</text><polygon fill="#A80036" points="691,338.1719,681,342.1719,691,346.1719,687,342.1719" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="685" x2="846.5" y1="342.1719" y2="342.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="697" y="337.4297">EmployeeAccount</text><polygon fill="#A80036" points="545,367.4824,535,371.4824,545,375.4824,541,371.4824" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="539" x2="674" y1="371.4824" y2="371.4824"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="551" y="366.7402">EmployeeAccount</text><polygon fill="#A80036" points="757,396.793,767,400.793,757,404.793,761,400.793" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="534" x2="763" y1="400.793" y2="400.793"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="25" x="541" y="396.0508">new</text><polygon fill="#A80036" points="545,441.4141,535,445.4141,545,449.4141,541,445.4141" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="539" x2="773" y1="445.4141" y2="445.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="551" y="425.3613">EmployeeAccount</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="551" y="440.6719">UserDetails</text><polygon fill="#A80036" points="377,486.0352,367,490.0352,377,494.0352,373,490.0352" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="371" x2="528" y1="490.0352" y2="490.0352"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="383" y="469.9824">EmployeeAccount</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="383" y="485.293">UserDetails</text><line style="stroke:#A80036;stroke-width:1.0;" x1="366" x2="408" y1="519.3457" y2="519.3457"/><line style="stroke:#A80036;stroke-width:1.0;" x1="408" x2="408" y1="519.3457" y2="532.3457"/><line style="stroke:#A80036;stroke-width:1.0;" x1="367" x2="408" y1="532.3457" y2="532.3457"/><polygon fill="#A80036" points="377,528.3457,367,532.3457,377,536.3457,373,532.3457" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="373" y="514.6035">認証</text><line style="stroke:#A80036;stroke-width:1.0;" x1="366" x2="408" y1="561.6563" y2="561.6563"/><line style="stroke:#A80036;stroke-width:1.0;" x1="408" x2="408" y1="561.6563" y2="574.6563"/><line style="stroke:#A80036;stroke-width:1.0;" x1="367" x2="408" y1="574.6563" y2="574.6563"/><polygon fill="#A80036" points="377,570.6563,367,574.6563,377,578.6563,373,574.6563" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="373" y="556.9141">セッションに格納</text><polygon fill="#A80036" points="45,599.9668,35,603.9668,45,607.9668,41,603.9668" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="39" x2="360" y1="603.9668" y2="603.9668"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="51" y="599.2246">リダイレクト要求</text><polygon fill="#A80036" points="235.5,629.2773,245.5,633.2773,235.5,637.2773,239.5,633.2773" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="34" x2="241.5" y1="633.2773" y2="633.2773"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="41" y="628.5352">menu()</text><polygon fill="#A80036" points="40,658.5879,30,662.5879,40,666.5879,36,662.5879" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="34" x2="251.5" y1="662.5879" y2="662.5879"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="46" y="657.8457">トップ画面</text><!--MD5=[ad8020508601382008ba7d9db4213ddf]
@startuml
skin rose
skinparam shadowing false
hide empty methods
hide empty fields

title UC002: 顧客ログイン機能 シーケンス図

actor "ユーザ" as user
activate user
participant "CustomerLogin\nController" as ctrl1
participant "Top\nController" as ctrl2
participant "SpringSecurity" as sec
participant "Customer\nUserDetailsService" as svc
participant "Customer\nRepository" as repo
participant "Customer\nUserDetails" as ud
database DB as db

user -> ctrl1 ++ : form()
ctrl1 -> user - - : ログイン画面
user -> sec ++ : 認証
sec -> svc ++ : loadUserByUsername()
svc -> repo ++ : findByUserName\n(userName)
repo -> db ++ : SELECT文
db - -> repo - - : EmployeeAccount
repo - -> svc - - : EmployeeAccount
svc -> ud ++ : new
ud - -> svc - - : EmployeeAccount\nUserDetails
svc - -> sec - - : EmployeeAccount\nUserDetails
sec -> sec : 認証
sec -> sec : セッションに格納
sec - -> user - - : リダイレクト要求
user -> ctrl2 ++ : menu()
ctrl2 - -> user - - : トップ画面

deactivate user

@enduml

PlantUML version 1.2022.0(Wed Jan 12 01:16:42 JST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: ja
Country: JP
--></g></svg>