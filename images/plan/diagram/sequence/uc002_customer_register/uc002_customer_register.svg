<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1068px" preserveAspectRatio="none" style="width:871px;height:1068px;background:#FFFFFF;" version="1.1" viewBox="0 0 871 1068" width="871px" zoomAndPan="magnify"><defs/><g><rect height="26.4883" style="stroke:#00000000;stroke-width:1.0;fill:none;" width="238" x="310" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="228" x="315" y="28.5352">UC009: 顧客登録機能 シーケンス図</text><rect fill="#FFFFFF" height="835.6953" style="stroke:#A80036;stroke-width:1.0;" width="10" x="24" y="131.9766"/><rect fill="#FFFFFF" height="87.9316" style="stroke:#A80036;stroke-width:1.0;" width="10" x="147.5" y="153.2871"/><rect fill="#FFFFFF" height="87.9316" style="stroke:#A80036;stroke-width:1.0;" width="10" x="147.5" y="312.8398"/><rect fill="#FFFFFF" height="352.0371" style="stroke:#A80036;stroke-width:1.0;" width="10" x="147.5" y="472.3926"/><rect fill="#FFFFFF" height="113.9316" style="stroke:#A80036;stroke-width:1.0;" width="10" x="147.5" y="853.7402"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="305.5" y="182.5977"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="305.5" y="342.1504"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="437" y="559.3242"/><rect fill="#FFFFFF" height="161.8633" style="stroke:#A80036;stroke-width:1.0;" width="10" x="574.5" y="633.2559"/><rect fill="#FFFFFF" height="87.9316" style="stroke:#A80036;stroke-width:1.0;" width="10" x="726" y="677.877"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="831" y="707.1875"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="29" x2="29" y1="121.9766" y2="985.6719"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="152" x2="152" y1="121.9766" y2="985.6719"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="310" x2="310" y1="121.9766" y2="985.6719"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="442" x2="442" y1="121.9766" y2="985.6719"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="579" x2="579" y1="121.9766" y2="985.6719"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="731" x2="731" y1="121.9766" y2="985.6719"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="836" x2="836" y1="121.9766" y2="985.6719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="5" y="119.0234">ユーザ</text><ellipse cx="29" cy="52.4883" fill="#FEFECE" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M29,60.4883 L29,87.4883 M16,68.4883 L42,68.4883 M29,87.4883 L16,102.4883 M29,87.4883 L42,102.4883 " fill="none" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="5" y="998.207">ユーザ</text><ellipse cx="29" cy="1011.1602" fill="#FEFECE" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M29,1019.1602 L29,1046.1602 M16,1027.1602 L42,1027.1602 M29,1046.1602 L16,1061.1602 M29,1046.1602 L42,1061.1602 " fill="none" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="179" x="63" y="90.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="165" x="70" y="111.0234">CustomerAddController</text><rect fill="#FEFECE" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="179" x="63" y="984.6719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="165" x="70" y="1005.207">CustomerAddController</text><rect fill="#FEFECE" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="117" x="252" y="90.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="259" y="111.0234">CustomerForm</text><rect fill="#FEFECE" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="117" x="252" y="984.6719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="259" y="1005.207">CustomerForm</text><rect fill="#FEFECE" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="126" x="379" y="90.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="386" y="111.0234">CustomerHelper</text><rect fill="#FEFECE" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="126" x="379" y="984.6719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="386" y="1005.207">CustomerHelper</text><rect fill="#FEFECE" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="129" x="515" y="90.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115" x="522" y="111.0234">CustomerService</text><rect fill="#FEFECE" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="129" x="515" y="984.6719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115" x="522" y="1005.207">CustomerService</text><rect fill="#FEFECE" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="154" x="654" y="90.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="661" y="111.0234">CustomerRepository</text><rect fill="#FEFECE" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="154" x="654" y="984.6719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="661" y="1005.207">CustomerRepository</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="18" x="824" y="119.0234">DB</text><path d="M818,69.4883 C818,59.4883 836,59.4883 836,59.4883 C836,59.4883 854,59.4883 854,69.4883 L854,95.4883 C854,105.4883 836,105.4883 836,105.4883 C836,105.4883 818,105.4883 818,95.4883 L818,69.4883 " fill="#FEFECE" style="stroke:#A80036;stroke-width:1.5;"/><path d="M818,69.4883 C818,79.4883 836,79.4883 836,79.4883 C836,79.4883 854,79.4883 854,69.4883 " fill="none" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="18" x="824" y="998.207">DB</text><path d="M818,1011.1602 C818,1001.1602 836,1001.1602 836,1001.1602 C836,1001.1602 854,1001.1602 854,1011.1602 L854,1037.1602 C854,1047.1602 836,1047.1602 836,1047.1602 C836,1047.1602 818,1047.1602 818,1037.1602 L818,1011.1602 " fill="#FEFECE" style="stroke:#A80036;stroke-width:1.5;"/><path d="M818,1011.1602 C818,1021.1602 836,1021.1602 836,1021.1602 C836,1021.1602 854,1021.1602 854,1011.1602 " fill="none" style="stroke:#A80036;stroke-width:1.5;"/><rect fill="#FFFFFF" height="835.6953" style="stroke:#A80036;stroke-width:1.0;" width="10" x="24" y="131.9766"/><rect fill="#FFFFFF" height="87.9316" style="stroke:#A80036;stroke-width:1.0;" width="10" x="147.5" y="153.2871"/><rect fill="#FFFFFF" height="87.9316" style="stroke:#A80036;stroke-width:1.0;" width="10" x="147.5" y="312.8398"/><rect fill="#FFFFFF" height="352.0371" style="stroke:#A80036;stroke-width:1.0;" width="10" x="147.5" y="472.3926"/><rect fill="#FFFFFF" height="113.9316" style="stroke:#A80036;stroke-width:1.0;" width="10" x="147.5" y="853.7402"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="305.5" y="182.5977"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="305.5" y="342.1504"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="437" y="559.3242"/><rect fill="#FFFFFF" height="161.8633" style="stroke:#A80036;stroke-width:1.0;" width="10" x="574.5" y="633.2559"/><rect fill="#FFFFFF" height="87.9316" style="stroke:#A80036;stroke-width:1.0;" width="10" x="726" y="677.877"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="831" y="707.1875"/><polygon fill="#A80036" points="135.5,149.2871,145.5,153.2871,135.5,157.2871,139.5,153.2871" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="34" x2="141.5" y1="153.2871" y2="153.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="38" x="41" y="148.5449">form()</text><polygon fill="#A80036" points="293.5,178.5977,303.5,182.5977,293.5,186.5977,297.5,182.5977" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="157.5" x2="299.5" y1="182.5977" y2="182.5977"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="25" x="164.5" y="177.8555">new</text><polygon fill="#A80036" points="168.5,207.9082,158.5,211.9082,168.5,215.9082,164.5,211.9082" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="162.5" x2="309.5" y1="211.9082" y2="211.9082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="174.5" y="207.166">CustomerForm</text><polygon fill="#A80036" points="45,237.2188,35,241.2188,45,245.2188,41,241.2188" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="39" x2="151.5" y1="241.2188" y2="241.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="51" y="236.4766">入力画面</text><line style="stroke:#A80036;stroke-width:1.0;" x1="34" x2="76" y1="270.5293" y2="270.5293"/><line style="stroke:#A80036;stroke-width:1.0;" x1="76" x2="76" y1="270.5293" y2="283.5293"/><line style="stroke:#A80036;stroke-width:1.0;" x1="35" x2="76" y1="283.5293" y2="283.5293"/><polygon fill="#A80036" points="45,279.5293,35,283.5293,45,287.5293,41,283.5293" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="41" y="265.7871">顧客情報入力</text><polygon fill="#A80036" points="135.5,308.8398,145.5,312.8398,135.5,316.8398,139.5,312.8398" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="34" x2="141.5" y1="312.8398" y2="312.8398"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="41" y="308.0977">confirm()</text><polygon fill="#A80036" points="293.5,338.1504,303.5,342.1504,293.5,346.1504,297.5,342.1504" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="157.5" x2="299.5" y1="342.1504" y2="342.1504"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="164.5" y="337.4082">バリデート</text><polygon fill="#A80036" points="168.5,367.4609,158.5,371.4609,168.5,375.4609,164.5,371.4609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="162.5" x2="309.5" y1="371.4609" y2="371.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="174.5" y="366.7188">BindingResult</text><polygon fill="#A80036" points="45,396.7715,35,400.7715,45,404.7715,41,400.7715" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="39" x2="151.5" y1="400.7715" y2="400.7715"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="51" y="396.0293">確認画面</text><line style="stroke:#A80036;stroke-width:1.0;" x1="34" x2="76" y1="430.082" y2="430.082"/><line style="stroke:#A80036;stroke-width:1.0;" x1="76" x2="76" y1="430.082" y2="443.082"/><line style="stroke:#A80036;stroke-width:1.0;" x1="35" x2="76" y1="443.082" y2="443.082"/><polygon fill="#A80036" points="45,439.082,35,443.082,45,447.082,41,443.082" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="41" y="425.3398">入力内容確認</text><polygon fill="#A80036" points="135.5,468.3926,145.5,472.3926,135.5,476.3926,139.5,472.3926" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="34" x2="141.5" y1="472.3926" y2="472.3926"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="41" y="467.6504">execute()</text><line style="stroke:#A80036;stroke-width:1.0;" x1="157.5" x2="199.5" y1="501.7031" y2="501.7031"/><line style="stroke:#A80036;stroke-width:1.0;" x1="199.5" x2="199.5" y1="501.7031" y2="514.7031"/><line style="stroke:#A80036;stroke-width:1.0;" x1="158.5" x2="199.5" y1="514.7031" y2="514.7031"/><polygon fill="#A80036" points="168.5,510.7031,158.5,514.7031,168.5,518.7031,164.5,514.7031" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="164.5" y="496.9609">セッション確認</text><polygon fill="#A80036" points="425,555.3242,435,559.3242,425,563.3242,429,559.3242" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="157.5" x2="431" y1="559.3242" y2="559.3242"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="164.5" y="539.2715">フォームから</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="164.5" y="554.582">エンティティに変換</text><polygon fill="#A80036" points="168.5,584.6348,158.5,588.6348,168.5,592.6348,164.5,588.6348" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="162.5" x2="441" y1="588.6348" y2="588.6348"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="174.5" y="583.8926">Customer</text><polygon fill="#A80036" points="562.5,629.2559,572.5,633.2559,562.5,637.2559,566.5,633.2559" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="157.5" x2="568.5" y1="633.2559" y2="633.2559"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36" x="164.5" y="613.2031">insert</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="164.5" y="628.5137">(Customer)</text><polygon fill="#A80036" points="714,673.877,724,677.877,714,681.877,718,677.877" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="584.5" x2="720" y1="677.877" y2="677.877"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36" x="591.5" y="657.8242">insert</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="591.5" y="673.1348">(Customer)</text><polygon fill="#A80036" points="819,703.1875,829,707.1875,819,711.1875,823,707.1875" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="736" x2="825" y1="707.1875" y2="707.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="743" y="702.4453">INSERT文</text><polygon fill="#A80036" points="747,732.498,737,736.498,747,740.498,743,736.498" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="741" x2="835" y1="736.498" y2="736.498"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="27" x="753" y="731.7559">void</text><polygon fill="#A80036" points="595.5,761.8086,585.5,765.8086,595.5,769.8086,591.5,765.8086" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="589.5" x2="730" y1="765.8086" y2="765.8086"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="27" x="601.5" y="761.0664">void</text><polygon fill="#A80036" points="168.5,791.1191,158.5,795.1191,168.5,799.1191,164.5,795.1191" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="162.5" x2="578.5" y1="795.1191" y2="795.1191"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="27" x="174.5" y="790.377">void</text><polygon fill="#A80036" points="45,820.4297,35,824.4297,45,828.4297,41,824.4297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="39" x2="151.5" y1="824.4297" y2="824.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="51" y="819.6875">リダイレクト</text><polygon fill="#A80036" points="135.5,849.7402,145.5,853.7402,135.5,857.7402,139.5,853.7402" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="34" x2="141.5" y1="853.7402" y2="853.7402"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="41" y="848.998">complete()</text><line style="stroke:#A80036;stroke-width:1.0;" x1="157.5" x2="199.5" y1="883.0508" y2="883.0508"/><line style="stroke:#A80036;stroke-width:1.0;" x1="199.5" x2="199.5" y1="883.0508" y2="896.0508"/><line style="stroke:#A80036;stroke-width:1.0;" x1="158.5" x2="199.5" y1="896.0508" y2="896.0508"/><polygon fill="#A80036" points="168.5,892.0508,158.5,896.0508,168.5,900.0508,164.5,896.0508" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="164.5" y="878.3086">セッション破棄</text><line style="stroke:#A80036;stroke-width:1.0;" x1="157.5" x2="199.5" y1="925.3613" y2="925.3613"/><line style="stroke:#A80036;stroke-width:1.0;" x1="199.5" x2="199.5" y1="925.3613" y2="938.3613"/><line style="stroke:#A80036;stroke-width:1.0;" x1="158.5" x2="199.5" y1="938.3613" y2="938.3613"/><polygon fill="#A80036" points="168.5,934.3613,158.5,938.3613,168.5,942.3613,164.5,938.3613" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="164.5" y="920.6191">Model追加</text><polygon fill="#A80036" points="40,963.6719,30,967.6719,40,971.6719,36,967.6719" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="34" x2="151.5" y1="967.6719" y2="967.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="46" y="962.9297">完了画面</text><!--MD5=[58a9c9aeee42a2ff865c893b7bac106c]
@startuml
skin rose
skinparam shadowing false
hide empty methods
hide empty fields

title UC009: 顧客登録機能 シーケンス図

actor ユーザ as user
activate user
participant "CustomerAddController" as controller
participant "CustomerForm" as form
participant "CustomerHelper" as helper
participant "CustomerService" as svc2
participant "CustomerRepository" as repo2
database DB as db

' 入力画面
user -> controller ++ : form()
controller -> form ++ : new
controller <- - form - - : CustomerForm
controller -> user - - : 入力画面

' 確認画面
user -> user : 顧客情報入力
user -> controller ++ : confirm()
controller -> form ++ : バリデート
controller <- - form - - : BindingResult
controller - -> user - - : 確認画面

' 完了画面
user -> user : 入力内容確認
user -> controller ++ : execute()
controller -> controller : セッション確認
' note right: フォームデータが\n空ならシステムエラー
controller -> helper ++ : フォームから\nエンティティに変換
controller <- - helper - - : Customer
controller -> svc2 ++ : insert\n(Customer)
svc2 -> repo2 ++ : insert\n(Customer)
repo2 -> db ++ : INSERT文
repo2 <- - db - - : void
svc2 <- - repo2 - - : void
svc2 -> controller - - : void
user <- - controller - - : リダイレクト
user -> controller ++ : complete()
controller -> controller : セッション破棄
controller -> controller : Model追加
controller -> user - - : 完了画面
deactivate user
@enduml

@startuml
skin rose
skinparam shadowing false
hide empty methods
hide empty fields

title UC009: 顧客登録機能 シーケンス図

actor ユーザ as user
activate user
participant "CustomerAddController" as controller
participant "CustomerForm" as form
participant "CustomerHelper" as helper
participant "CustomerService" as svc2
participant "CustomerRepository" as repo2
database DB as db

user -> controller ++ : form()
controller -> form ++ : new
controller <- - form - - : CustomerForm
controller -> user - - : 入力画面

user -> user : 顧客情報入力
user -> controller ++ : confirm()
controller -> form ++ : バリデート
controller <- - form - - : BindingResult
controller - -> user - - : 確認画面

user -> user : 入力内容確認
user -> controller ++ : execute()
controller -> controller : セッション確認
controller -> helper ++ : フォームから\nエンティティに変換
controller <- - helper - - : Customer
controller -> svc2 ++ : insert\n(Customer)
svc2 -> repo2 ++ : insert\n(Customer)
repo2 -> db ++ : INSERT文
repo2 <- - db - - : void
svc2 <- - repo2 - - : void
svc2 -> controller - - : void
user <- - controller - - : リダイレクト
user -> controller ++ : complete()
controller -> controller : セッション破棄
controller -> controller : Model追加
controller -> user - - : 完了画面
deactivate user
@enduml

PlantUML version 1.2022.5(Sat Apr 30 19:55:52 JST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: ja
Country: JP
--></g></svg>