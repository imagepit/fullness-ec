<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1631px" preserveAspectRatio="none" style="width:872px;height:1631px;background:#FFFFFF;" version="1.1" viewBox="0 0 872 1631" width="872px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="309" x="280.75" y="29.4023">UC010: 新商品登録機能 シーケンス図</text><rect fill="#FFFFFF" height="1400.9746" style="stroke:#A80036;stroke-width:1.0;" width="10" x="24" y="129.6875"/><rect fill="#FFFFFF" height="347.416" style="stroke:#A80036;stroke-width:1.0;" width="10" x="136" y="150.998"/><rect fill="#FFFFFF" height="244.4844" style="stroke:#A80036;stroke-width:1.0;" width="10" x="136" y="570.0352"/><rect fill="#FFFFFF" height="485.9688" style="stroke:#A80036;stroke-width:1.0;" width="10" x="136" y="886.1406"/><rect fill="#FFFFFF" height="129.2422" style="stroke:#A80036;stroke-width:1.0;" width="10" x="136" y="1401.4199"/><rect fill="#FFFFFF" height="146.5527" style="stroke:#A80036;stroke-width:1.0;" width="10" x="317" y="264.9297"/><rect fill="#FFFFFF" height="266.7949" style="stroke:#A80036;stroke-width:1.0;" width="10" x="425" y="1076.0039"/><rect fill="#FFFFFF" height="87.9316" style="stroke:#A80036;stroke-width:1.0;" width="10" x="533" y="294.2402"/><rect fill="#FFFFFF" height="87.9316" style="stroke:#A80036;stroke-width:1.0;" width="10" x="651" y="1108.3145"/><rect fill="#FFFFFF" height="87.9316" style="stroke:#A80036;stroke-width:1.0;" width="10" x="756.5" y="1225.5566"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="842.5" y="323.5508"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="842.5" y="1137.625"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="842.5" y="1254.8672"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="29" x2="29" y1="119.6875" y2="1548.6621"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="140.5" x2="140.5" y1="119.6875" y2="1548.6621"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="321.5" x2="321.5" y1="119.6875" y2="1548.6621"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="429.5" x2="429.5" y1="119.6875" y2="1548.6621"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="537.5" x2="537.5" y1="119.6875" y2="1548.6621"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="655.5" x2="655.5" y1="119.6875" y2="1548.6621"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="761.5" x2="761.5" y1="119.6875" y2="1548.6621"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="847.5" x2="847.5" y1="119.6875" y2="1548.6621"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="5" y="116.7344">ユーザ</text><ellipse cx="29" cy="50.1992" fill="#FEFECE" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M29,58.1992 L29,85.1992 M16,66.1992 L42,66.1992 M29,85.1992 L16,100.1992 M29,85.1992 L42,100.1992 " fill="none" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="5" y="1561.1973">ユーザ</text><ellipse cx="29" cy="1574.1504" fill="#FEFECE" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M29,1582.1504 L29,1609.1504 M16,1590.1504 L42,1590.1504 M29,1609.1504 L16,1624.1504 M29,1609.1504 L42,1624.1504 " fill="none" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="95" x="93.5" y="71.7109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="100.5" y="92.2461">ProductAdd</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="106" y="108.7344">Controller</text><rect fill="#FEFECE" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="95" x="93.5" y="1547.6621"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="100.5" y="1568.1973">ProductAdd</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="106" y="1584.6855">Controller</text><rect fill="#FEFECE" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="129" x="257.5" y="71.7109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115" x="264.5" y="92.2461">ProductCategory</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="298" y="108.7344">Service</text><rect fill="#FEFECE" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="129" x="257.5" y="1547.6621"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115" x="264.5" y="1568.1973">ProductCategory</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="298" y="1584.6855">Service</text><rect fill="#FEFECE" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="67" x="396.5" y="71.7109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="403.5" y="92.2461">Product</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="406" y="108.7344">Service</text><rect fill="#FEFECE" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="67" x="396.5" y="1547.6621"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="403.5" y="1568.1973">Product</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="406" y="1584.6855">Service</text><rect fill="#FEFECE" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="129" x="473.5" y="71.7109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115" x="480.5" y="92.2461">ProductCategory</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="501.5" y="108.7344">Repository</text><rect fill="#FEFECE" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="129" x="473.5" y="1547.6621"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115" x="480.5" y="1568.1973">ProductCategory</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="501.5" y="1584.6855">Repository</text><rect fill="#FEFECE" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="87" x="612.5" y="71.7109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="629.5" y="92.2461">Product</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="619.5" y="108.7344">Repository</text><rect fill="#FEFECE" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="87" x="612.5" y="1547.6621"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="629.5" y="1568.1973">Product</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="619.5" y="1584.6855">Repository</text><rect fill="#FEFECE" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="104" x="709.5" y="71.7109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90" x="716.5" y="92.2461">ProductStock</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="725" y="108.7344">Repository</text><rect fill="#FEFECE" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="104" x="709.5" y="1547.6621"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90" x="716.5" y="1568.1973">ProductStock</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="725" y="1584.6855">Repository</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="18" x="835.5" y="116.7344">DB</text><path d="M829.5,67.1992 C829.5,57.1992 847.5,57.1992 847.5,57.1992 C847.5,57.1992 865.5,57.1992 865.5,67.1992 L865.5,93.1992 C865.5,103.1992 847.5,103.1992 847.5,103.1992 C847.5,103.1992 829.5,103.1992 829.5,93.1992 L829.5,67.1992 " fill="#FEFECE" style="stroke:#000000;stroke-width:1.5;"/><path d="M829.5,67.1992 C829.5,77.1992 847.5,77.1992 847.5,77.1992 C847.5,77.1992 865.5,77.1992 865.5,67.1992 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="18" x="835.5" y="1561.1973">DB</text><path d="M829.5,1574.1504 C829.5,1564.1504 847.5,1564.1504 847.5,1564.1504 C847.5,1564.1504 865.5,1564.1504 865.5,1574.1504 L865.5,1600.1504 C865.5,1610.1504 847.5,1610.1504 847.5,1610.1504 C847.5,1610.1504 829.5,1610.1504 829.5,1600.1504 L829.5,1574.1504 " fill="#FEFECE" style="stroke:#000000;stroke-width:1.5;"/><path d="M829.5,1574.1504 C829.5,1584.1504 847.5,1584.1504 847.5,1584.1504 C847.5,1584.1504 865.5,1584.1504 865.5,1574.1504 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><rect fill="#FFFFFF" height="1400.9746" style="stroke:#A80036;stroke-width:1.0;" width="10" x="24" y="129.6875"/><rect fill="#FFFFFF" height="347.416" style="stroke:#A80036;stroke-width:1.0;" width="10" x="136" y="150.998"/><rect fill="#FFFFFF" height="244.4844" style="stroke:#A80036;stroke-width:1.0;" width="10" x="136" y="570.0352"/><rect fill="#FFFFFF" height="485.9688" style="stroke:#A80036;stroke-width:1.0;" width="10" x="136" y="886.1406"/><rect fill="#FFFFFF" height="129.2422" style="stroke:#A80036;stroke-width:1.0;" width="10" x="136" y="1401.4199"/><rect fill="#FFFFFF" height="146.5527" style="stroke:#A80036;stroke-width:1.0;" width="10" x="317" y="264.9297"/><rect fill="#FFFFFF" height="266.7949" style="stroke:#A80036;stroke-width:1.0;" width="10" x="425" y="1076.0039"/><rect fill="#FFFFFF" height="87.9316" style="stroke:#A80036;stroke-width:1.0;" width="10" x="533" y="294.2402"/><rect fill="#FFFFFF" height="87.9316" style="stroke:#A80036;stroke-width:1.0;" width="10" x="651" y="1108.3145"/><rect fill="#FFFFFF" height="87.9316" style="stroke:#A80036;stroke-width:1.0;" width="10" x="756.5" y="1225.5566"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="842.5" y="323.5508"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="842.5" y="1137.625"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="842.5" y="1254.8672"/><polygon fill="#A80036" points="124,146.998,134,150.998,124,154.998,128,150.998" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="34" x2="130" y1="150.998" y2="150.998"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="38" x="41" y="146.2559">form()</text><line style="stroke:#A80036;stroke-width:1.0;" x1="146" x2="188" y1="180.3086" y2="180.3086"/><line style="stroke:#A80036;stroke-width:1.0;" x1="188" x2="188" y1="180.3086" y2="193.3086"/><line style="stroke:#A80036;stroke-width:1.0;" x1="147" x2="188" y1="193.3086" y2="193.3086"/><polygon fill="#A80036" points="157,189.3086,147,193.3086,157,197.3086,153,193.3086" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="153" y="175.5664">setUpForm()</text><line style="stroke:#A80036;stroke-width:1.0;" x1="146" x2="188" y1="222.6191" y2="222.6191"/><line style="stroke:#A80036;stroke-width:1.0;" x1="188" x2="188" y1="222.6191" y2="235.6191"/><line style="stroke:#A80036;stroke-width:1.0;" x1="147" x2="188" y1="235.6191" y2="235.6191"/><polygon fill="#A80036" points="157,231.6191,147,235.6191,157,239.6191,153,235.6191" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36" x="153" y="217.877">bind()</text><polygon fill="#A80036" points="305,260.9297,315,264.9297,305,268.9297,309,264.9297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="146" x2="311" y1="264.9297" y2="264.9297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="153" y="260.1875">findAll()</text><polygon fill="#A80036" points="521,290.2402,531,294.2402,521,298.2402,525,294.2402" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="327" x2="527" y1="294.2402" y2="294.2402"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="334" y="289.498">findAll()</text><polygon fill="#A80036" points="830.5,319.5508,840.5,323.5508,830.5,327.5508,834.5,323.5508" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="543" x2="836.5" y1="323.5508" y2="323.5508"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="550" y="318.8086">SELECT文</text><polygon fill="#A80036" points="554,348.8613,544,352.8613,554,356.8613,550,352.8613" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="548" x2="846.5" y1="352.8613" y2="352.8613"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="560" y="348.1191">List&lt;ProductCategory&gt;</text><polygon fill="#A80036" points="338,378.1719,328,382.1719,338,386.1719,334,382.1719" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="332" x2="537" y1="382.1719" y2="382.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="344" y="377.4297">List&lt;ProductCategory&gt;</text><polygon fill="#A80036" points="157,407.4824,147,411.4824,157,415.4824,153,411.4824" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="151" x2="321" y1="411.4824" y2="411.4824"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="163" y="406.7402">List&lt;ProductCategory&gt;</text><line style="stroke:#A80036;stroke-width:1.0;" x1="146" x2="188" y1="456.1035" y2="456.1035"/><line style="stroke:#A80036;stroke-width:1.0;" x1="188" x2="188" y1="456.1035" y2="469.1035"/><line style="stroke:#A80036;stroke-width:1.0;" x1="147" x2="188" y1="469.1035" y2="469.1035"/><polygon fill="#A80036" points="157,465.1035,147,469.1035,157,473.1035,153,469.1035" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="153" y="436.0508">Model追加</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="153" y="451.3613">（商品カテゴリリスト）</text><polygon fill="#A80036" points="45,494.4141,35,498.4141,45,502.4141,41,498.4141" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="39" x2="140" y1="498.4141" y2="498.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="51" y="493.6719">入力画面</text><line style="stroke:#A80036;stroke-width:1.0;" x1="34" x2="76" y1="527.7246" y2="527.7246"/><line style="stroke:#A80036;stroke-width:1.0;" x1="76" x2="76" y1="527.7246" y2="540.7246"/><line style="stroke:#A80036;stroke-width:1.0;" x1="35" x2="76" y1="540.7246" y2="540.7246"/><polygon fill="#A80036" points="45,536.7246,35,540.7246,45,544.7246,41,540.7246" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="41" y="522.9824">商品情報入力</text><polygon fill="#A80036" points="124,566.0352,134,570.0352,124,574.0352,128,570.0352" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="34" x2="130" y1="570.0352" y2="570.0352"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="41" y="565.293">confirm()</text><line style="stroke:#A80036;stroke-width:1.0;" x1="146" x2="188" y1="599.3457" y2="599.3457"/><line style="stroke:#A80036;stroke-width:1.0;" x1="188" x2="188" y1="599.3457" y2="612.3457"/><line style="stroke:#A80036;stroke-width:1.0;" x1="147" x2="188" y1="612.3457" y2="612.3457"/><polygon fill="#A80036" points="157,608.3457,147,612.3457,157,616.3457,153,612.3457" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="153" y="594.6035">バリデート</text><line style="stroke:#A80036;stroke-width:1.0;" x1="146" x2="188" y1="656.9668" y2="656.9668"/><line style="stroke:#A80036;stroke-width:1.0;" x1="188" x2="188" y1="656.9668" y2="669.9668"/><line style="stroke:#A80036;stroke-width:1.0;" x1="147" x2="188" y1="669.9668" y2="669.9668"/><polygon fill="#A80036" points="157,665.9668,147,669.9668,157,673.9668,153,669.9668" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="153" y="636.9141">Model追加</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="153" y="652.2246">（選択した商品カテゴリ）</text><line style="stroke:#A80036;stroke-width:1.0;" x1="146" x2="188" y1="714.5879" y2="714.5879"/><line style="stroke:#A80036;stroke-width:1.0;" x1="188" x2="188" y1="714.5879" y2="727.5879"/><line style="stroke:#A80036;stroke-width:1.0;" x1="147" x2="188" y1="727.5879" y2="727.5879"/><polygon fill="#A80036" points="157,723.5879,147,727.5879,157,731.5879,153,727.5879" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="153" y="694.5352">Model追加</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="153" y="709.8457">（商品画像Base64）</text><line style="stroke:#A80036;stroke-width:1.0;" x1="146" x2="188" y1="772.209" y2="772.209"/><line style="stroke:#A80036;stroke-width:1.0;" x1="188" x2="188" y1="772.209" y2="785.209"/><line style="stroke:#A80036;stroke-width:1.0;" x1="147" x2="188" y1="785.209" y2="785.209"/><polygon fill="#A80036" points="157,781.209,147,785.209,157,789.209,153,785.209" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="153" y="752.1563">Model追加</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="153" y="767.4668">（商品画像バイトデータ）</text><path d="M321,751.7432 L321,776.7432 L628,776.7432 L628,761.7432 L618,751.7432 L321,751.7432 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><path d="M618,751.7432 L618,761.7432 L628,761.7432 L618,751.7432 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="286" x="327" y="769.3115">画像データを完了画面で使うのでセッション格納</text><polygon fill="#A80036" points="45,810.5195,35,814.5195,45,818.5195,41,814.5195" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="39" x2="140" y1="814.5195" y2="814.5195"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="51" y="809.7773">確認画面</text><line style="stroke:#A80036;stroke-width:1.0;" x1="34" x2="76" y1="843.8301" y2="843.8301"/><line style="stroke:#A80036;stroke-width:1.0;" x1="76" x2="76" y1="843.8301" y2="856.8301"/><line style="stroke:#A80036;stroke-width:1.0;" x1="35" x2="76" y1="856.8301" y2="856.8301"/><polygon fill="#A80036" points="45,852.8301,35,856.8301,45,860.8301,41,856.8301" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="41" y="839.0879">入力内容確認</text><polygon fill="#A80036" points="124,882.1406,134,886.1406,124,890.1406,128,886.1406" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="34" x2="130" y1="886.1406" y2="886.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="41" y="881.3984">execute()</text><line style="stroke:#A80036;stroke-width:1.0;" x1="146" x2="188" y1="915.4512" y2="915.4512"/><line style="stroke:#A80036;stroke-width:1.0;" x1="188" x2="188" y1="915.4512" y2="928.4512"/><line style="stroke:#A80036;stroke-width:1.0;" x1="147" x2="188" y1="928.4512" y2="928.4512"/><polygon fill="#A80036" points="157,924.4512,147,928.4512,157,932.4512,153,928.4512" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="153" y="910.709">セッション確認</text><path d="M256,902.6406 L256,927.6406 L537,927.6406 L537,912.6406 L527,902.6406 L256,902.6406 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><path d="M527,902.6406 L527,912.6406 L537,912.6406 L527,902.6406 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="260" x="262" y="920.209">セッション情報がない場合はシステムエラー</text><line style="stroke:#A80036;stroke-width:1.0;" x1="146" x2="188" y1="973.0723" y2="973.0723"/><line style="stroke:#A80036;stroke-width:1.0;" x1="188" x2="188" y1="973.0723" y2="986.0723"/><line style="stroke:#A80036;stroke-width:1.0;" x1="147" x2="188" y1="986.0723" y2="986.0723"/><polygon fill="#A80036" points="157,982.0723,147,986.0723,157,990.0723,153,986.0723" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="153" y="953.0195">画像保存ファイル名</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="153" y="968.3301">をModelに追加</text><line style="stroke:#A80036;stroke-width:1.0;" x1="146" x2="188" y1="1030.6934" y2="1030.6934"/><line style="stroke:#A80036;stroke-width:1.0;" x1="188" x2="188" y1="1030.6934" y2="1043.6934"/><line style="stroke:#A80036;stroke-width:1.0;" x1="147" x2="188" y1="1043.6934" y2="1043.6934"/><polygon fill="#A80036" points="157,1039.6934,147,1043.6934,157,1047.6934,153,1043.6934" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="153" y="1010.6406">フォームを</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="153" y="1025.9512">エンティティに変換</text><polygon fill="#A80036" points="413,1072.0039,423,1076.0039,413,1080.0039,417,1076.0039" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="146" x2="419" y1="1076.0039" y2="1076.0039"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="153" y="1071.2617">insert(Product product)</text><path d="M440,1056.6934 L440,1081.6934 L591,1081.6934 L591,1066.6934 L581,1056.6934 L440,1056.6934 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><path d="M581,1056.6934 L581,1066.6934 L591,1066.6934 L581,1056.6934 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="446" y="1074.2617">トランザクション処理</text><polygon fill="#A80036" points="639,1104.3145,649,1108.3145,639,1112.3145,643,1108.3145" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="435" x2="645" y1="1108.3145" y2="1108.3145"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="442" y="1103.5723">insert(Product product)</text><polygon fill="#A80036" points="830.5,1133.625,840.5,1137.625,830.5,1141.625,834.5,1137.625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="661" x2="836.5" y1="1137.625" y2="1137.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="668" y="1132.8828">INSERT文</text><polygon fill="#A80036" points="672,1162.9355,662,1166.9355,672,1170.9355,668,1166.9355" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="666" x2="846.5" y1="1166.9355" y2="1166.9355"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="27" x="678" y="1162.1934">void</text><polygon fill="#A80036" points="446,1192.2461,436,1196.2461,446,1200.2461,442,1196.2461" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="440" x2="655" y1="1196.2461" y2="1196.2461"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="27" x="452" y="1191.5039">void</text><polygon fill="#A80036" points="744.5,1221.5566,754.5,1225.5566,744.5,1229.5566,748.5,1225.5566" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="435" x2="750.5" y1="1225.5566" y2="1225.5566"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="442" y="1220.8145">insert(ProductStock)</text><polygon fill="#A80036" points="830.5,1250.8672,840.5,1254.8672,830.5,1258.8672,834.5,1254.8672" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="766.5" x2="836.5" y1="1254.8672" y2="1254.8672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="773.5" y="1250.125">INSERT文</text><polygon fill="#A80036" points="777.5,1280.1777,767.5,1284.1777,777.5,1288.1777,773.5,1284.1777" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="771.5" x2="846.5" y1="1284.1777" y2="1284.1777"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="27" x="783.5" y="1279.4355">void</text><polygon fill="#A80036" points="446,1309.4883,436,1313.4883,446,1317.4883,442,1313.4883" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="440" x2="760.5" y1="1313.4883" y2="1313.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="27" x="452" y="1308.7461">void</text><polygon fill="#A80036" points="157,1338.7988,147,1342.7988,157,1346.7988,153,1342.7988" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="151" x2="429" y1="1342.7988" y2="1342.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="27" x="163" y="1338.0566">void</text><polygon fill="#A80036" points="45,1368.1094,35,1372.1094,45,1376.1094,41,1372.1094" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="39" x2="140" y1="1372.1094" y2="1372.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="51" y="1367.3672">リダイレクト</text><polygon fill="#A80036" points="124,1397.4199,134,1401.4199,124,1405.4199,128,1401.4199" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="34" x2="130" y1="1401.4199" y2="1401.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="41" y="1396.6777">complete()</text><line style="stroke:#A80036;stroke-width:1.0;" x1="146" x2="188" y1="1430.7305" y2="1430.7305"/><line style="stroke:#A80036;stroke-width:1.0;" x1="188" x2="188" y1="1430.7305" y2="1443.7305"/><line style="stroke:#A80036;stroke-width:1.0;" x1="147" x2="188" y1="1443.7305" y2="1443.7305"/><polygon fill="#A80036" points="157,1439.7305,147,1443.7305,157,1447.7305,153,1443.7305" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="153" y="1425.9883">セッション破棄</text><line style="stroke:#A80036;stroke-width:1.0;" x1="146" x2="188" y1="1488.3516" y2="1488.3516"/><line style="stroke:#A80036;stroke-width:1.0;" x1="188" x2="188" y1="1488.3516" y2="1501.3516"/><line style="stroke:#A80036;stroke-width:1.0;" x1="147" x2="188" y1="1501.3516" y2="1501.3516"/><polygon fill="#A80036" points="157,1497.3516,147,1501.3516,157,1505.3516,153,1501.3516" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="153" y="1468.2988">Modelに追加</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="153" y="1483.6094">（商品名）</text><polygon fill="#A80036" points="40,1526.6621,30,1530.6621,40,1534.6621,36,1530.6621" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="34" x2="140" y1="1530.6621" y2="1530.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="46" y="1525.9199">完了画面</text><!--MD5=[ddd8be0d61002c41c185b5673e87cb29]
@startuml
skin rose
skinparam shadowing false
hide empty methods
hide empty fields

title UC010: 新商品登録機能 シーケンス図

skinparam shadowing false
actor ユーザ as user
activate user
participant "ProductAdd\nController" as controller
participant "ProductCategory\nService" as svc1
participant "Product\nService" as svc2
participant "ProductCategory\nRepository" as repo3
participant "Product\nRepository" as repo1
participant "ProductStock\nRepository" as repo2
database DB

' 入力画面
user -> controller ++ : form()
controller -> controller : setUpForm()
controller -> controller : bind()
controller -> svc1 ++ : findAll()
svc1 -> repo3 ++ : findAll()
repo3 -> DB ++ : SELECT文
DB - -> repo3 - - : List<ProductCategory>
repo3 - -> svc1 - - : List<ProductCategory>
svc1 - -> controller - - : List<ProductCategory>
controller -> controller : Model追加\n（商品カテゴリリスト）
controller - -> user - - : 入力画面

' 確認画面
user -> user : 商品情報入力
user -> controller ++ : confirm()
controller -> controller : バリデート
controller -> controller : Model追加\n（選択した商品カテゴリ）
controller -> controller : Model追加\n（商品画像Base64）
controller -> controller : Model追加\n（商品画像バイトデータ）
note right: 画像データを完了画面で使うのでセッション格納
controller - -> user - - : 確認画面

' 完了画面
user -> user : 入力内容確認
user -> controller ++ : execute()
controller -> controller : セッション確認
note right: セッション情報がない場合はシステムエラー
controller -> controller : 画像保存ファイル名\nをModelに追加
controller -> controller : フォームを\nエンティティに変換
controller -> svc2 ++ : insert(Product product)
note right: トランザクション処理
svc2 -> repo1 ++ : insert(Product product)
repo1 -> DB ++ : INSERT文
DB - -> repo1 - - : void
repo1 - -> svc2 - - : void
svc2 -> repo2 ++ : insert(ProductStock)
repo2 -> DB ++ : INSERT文
DB - -> repo2 - - : void
repo2 - -> svc2 - - : void
svc2 - -> controller - - : void
user <- - controller - - : リダイレクト
user -> controller ++ : complete()
controller -> controller : セッション破棄
controller -> controller : Modelに追加\n（商品名）
controller - -> user - - : 完了画面

deactivate user

@enduml

@startuml
skin rose
skinparam shadowing false
hide empty methods
hide empty fields

title UC010: 新商品登録機能 シーケンス図

skinparam shadowing false
actor ユーザ as user
activate user
participant "ProductAdd\nController" as controller
participant "ProductCategory\nService" as svc1
participant "Product\nService" as svc2
participant "ProductCategory\nRepository" as repo3
participant "Product\nRepository" as repo1
participant "ProductStock\nRepository" as repo2
database DB

user -> controller ++ : form()
controller -> controller : setUpForm()
controller -> controller : bind()
controller -> svc1 ++ : findAll()
svc1 -> repo3 ++ : findAll()
repo3 -> DB ++ : SELECT文
DB - -> repo3 - - : List<ProductCategory>
repo3 - -> svc1 - - : List<ProductCategory>
svc1 - -> controller - - : List<ProductCategory>
controller -> controller : Model追加\n（商品カテゴリリスト）
controller - -> user - - : 入力画面

user -> user : 商品情報入力
user -> controller ++ : confirm()
controller -> controller : バリデート
controller -> controller : Model追加\n（選択した商品カテゴリ）
controller -> controller : Model追加\n（商品画像Base64）
controller -> controller : Model追加\n（商品画像バイトデータ）
note right: 画像データを完了画面で使うのでセッション格納
controller - -> user - - : 確認画面

user -> user : 入力内容確認
user -> controller ++ : execute()
controller -> controller : セッション確認
note right: セッション情報がない場合はシステムエラー
controller -> controller : 画像保存ファイル名\nをModelに追加
controller -> controller : フォームを\nエンティティに変換
controller -> svc2 ++ : insert(Product product)
note right: トランザクション処理
svc2 -> repo1 ++ : insert(Product product)
repo1 -> DB ++ : INSERT文
DB - -> repo1 - - : void
repo1 - -> svc2 - - : void
svc2 -> repo2 ++ : insert(ProductStock)
repo2 -> DB ++ : INSERT文
DB - -> repo2 - - : void
repo2 - -> svc2 - - : void
svc2 - -> controller - - : void
user <- - controller - - : リダイレクト
user -> controller ++ : complete()
controller -> controller : セッション破棄
controller -> controller : Modelに追加\n（商品名）
controller - -> user - - : 完了画面

deactivate user

@enduml

PlantUML version 1.2022.0(Wed Jan 12 01:16:42 JST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: ja
Country: JP
--></g></svg>