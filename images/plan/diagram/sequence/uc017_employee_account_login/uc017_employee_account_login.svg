<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="736px" preserveAspectRatio="none" style="width:912px;height:736px;background:#FFFFFF;" version="1.1" viewBox="0 0 912 736" width="912px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="417" x="246.5" y="29.4023">UC017: 社員アカウントログイン機能 シーケンス図</text><rect fill="#FFFFFF" height="505.9004" style="stroke:#A80036;stroke-width:1.0;" width="10" x="18" y="129.6875"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="130" y="150.998"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="224" y="606.2773"/><rect fill="#FFFFFF" height="367.3477" style="stroke:#A80036;stroke-width:1.0;" width="10" x="332.5" y="209.6191"/><rect fill="#FFFFFF" height="251.1055" style="stroke:#A80036;stroke-width:1.0;" width="10" x="492.5" y="254.2402"/><rect fill="#FFFFFF" height="87.9316" style="stroke:#A80036;stroke-width:1.0;" width="10" x="640" y="298.8613"/><rect fill="#FFFFFF" height="44.6211" style="stroke:#A80036;stroke-width:1.0;" width="10" x="786" y="416.1035"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="882" y="328.1719"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="23" x2="23" y1="119.6875" y2="653.5879"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="135" x2="135" y1="119.6875" y2="653.5879"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="229" x2="229" y1="119.6875" y2="653.5879"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="337" x2="337" y1="119.6875" y2="653.5879"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="497" x2="497" y1="119.6875" y2="653.5879"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="645" x2="645" y1="119.6875" y2="653.5879"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="791" x2="791" y1="119.6875" y2="653.5879"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="887" x2="887" y1="119.6875" y2="653.5879"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="5" y="116.7344">user</text><ellipse cx="23" cy="50.1992" fill="#FEFECE" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M23,58.1992 L23,85.1992 M10,66.1992 L36,66.1992 M23,85.1992 L10,100.1992 M23,85.1992 L36,100.1992 " fill="none" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="5" y="666.123">user</text><ellipse cx="23" cy="679.0762" fill="#FEFECE" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M23,687.0762 L23,714.0762 M10,695.0762 L36,695.0762 M23,714.0762 L10,729.0762 M23,714.0762 L36,729.0762 " fill="none" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="84" x="93" y="71.7109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="116" y="92.2461">Login</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="100" y="108.7344">Controller</text><rect fill="#FEFECE" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="84" x="93" y="652.5879"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="116" y="673.123">Login</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="100" y="689.6113">Controller</text><rect fill="#FEFECE" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="84" x="187" y="71.7109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="210" y="92.2461">Menu</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="194" y="108.7344">Controller</text><rect fill="#FEFECE" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="84" x="187" y="652.5879"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="210" y="673.123">Menu</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="194" y="689.6113">Controller</text><rect fill="#FEFECE" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="113" x="281" y="88.1992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="288" y="108.7344">SpringSecurity</text><rect fill="#FEFECE" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="113" x="281" y="652.5879"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="288" y="673.123">SpringSecurity</text><rect fill="#FEFECE" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="139" x="428" y="71.7109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="436.5" y="92.2461">EmployeeAccount</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="435" y="108.7344">UserDetailsService</text><rect fill="#FEFECE" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="139" x="428" y="652.5879"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="436.5" y="673.123">EmployeeAccount</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="435" y="689.6113">UserDetailsService</text><rect fill="#FEFECE" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="136" x="577" y="71.7109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="584" y="92.2461">EmployeeAccount</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="608.5" y="108.7344">Repository</text><rect fill="#FEFECE" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="136" x="577" y="652.5879"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="584" y="673.123">EmployeeAccount</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="608.5" y="689.6113">Repository</text><rect fill="#FEFECE" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="136" x="723" y="71.7109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="730" y="92.2461">EmployeeAccount</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="752.5" y="108.7344">UserDetails</text><rect fill="#FEFECE" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="136" x="723" y="652.5879"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="730" y="673.123">EmployeeAccount</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="752.5" y="689.6113">UserDetails</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="18" x="875" y="116.7344">DB</text><path d="M869,67.1992 C869,57.1992 887,57.1992 887,57.1992 C887,57.1992 905,57.1992 905,67.1992 L905,93.1992 C905,103.1992 887,103.1992 887,103.1992 C887,103.1992 869,103.1992 869,93.1992 L869,67.1992 " fill="#FEFECE" style="stroke:#000000;stroke-width:1.5;"/><path d="M869,67.1992 C869,77.1992 887,77.1992 887,77.1992 C887,77.1992 905,77.1992 905,67.1992 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="18" x="875" y="666.123">DB</text><path d="M869,679.0762 C869,669.0762 887,669.0762 887,669.0762 C887,669.0762 905,669.0762 905,679.0762 L905,705.0762 C905,715.0762 887,715.0762 887,715.0762 C887,715.0762 869,715.0762 869,705.0762 L869,679.0762 " fill="#FEFECE" style="stroke:#000000;stroke-width:1.5;"/><path d="M869,679.0762 C869,689.0762 887,689.0762 887,689.0762 C887,689.0762 905,689.0762 905,679.0762 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><rect fill="#FFFFFF" height="505.9004" style="stroke:#A80036;stroke-width:1.0;" width="10" x="18" y="129.6875"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="130" y="150.998"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="224" y="606.2773"/><rect fill="#FFFFFF" height="367.3477" style="stroke:#A80036;stroke-width:1.0;" width="10" x="332.5" y="209.6191"/><rect fill="#FFFFFF" height="251.1055" style="stroke:#A80036;stroke-width:1.0;" width="10" x="492.5" y="254.2402"/><rect fill="#FFFFFF" height="87.9316" style="stroke:#A80036;stroke-width:1.0;" width="10" x="640" y="298.8613"/><rect fill="#FFFFFF" height="44.6211" style="stroke:#A80036;stroke-width:1.0;" width="10" x="786" y="416.1035"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="882" y="328.1719"/><polygon fill="#A80036" points="118,146.998,128,150.998,118,154.998,122,150.998" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="28" x2="124" y1="150.998" y2="150.998"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="38" x="35" y="146.2559">form()</text><polygon fill="#A80036" points="39,176.3086,29,180.3086,39,184.3086,35,180.3086" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="33" x2="134" y1="180.3086" y2="180.3086"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="45" y="175.5664">ログイン画面</text><polygon fill="#A80036" points="320.5,205.6191,330.5,209.6191,320.5,213.6191,324.5,209.6191" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="28" x2="326.5" y1="209.6191" y2="209.6191"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="35" y="204.877">認証</text><polygon fill="#A80036" points="480.5,250.2402,490.5,254.2402,480.5,258.2402,484.5,254.2402" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="342.5" x2="486.5" y1="254.2402" y2="254.2402"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="349.5" y="234.1875">loadUserByUsername</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="349.5" y="249.498">(userName)</text><polygon fill="#A80036" points="628,294.8613,638,298.8613,628,302.8613,632,298.8613" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="502.5" x2="634" y1="298.8613" y2="298.8613"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="509.5" y="278.8086">findByUserName</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="509.5" y="294.1191">(userName)</text><polygon fill="#A80036" points="870,324.1719,880,328.1719,870,332.1719,874,328.1719" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="650" x2="876" y1="328.1719" y2="328.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="657" y="323.4297">SELECT文</text><polygon fill="#A80036" points="661,353.4824,651,357.4824,661,361.4824,657,357.4824" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="655" x2="886" y1="357.4824" y2="357.4824"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="667" y="352.7402">EmployeeAccount</text><polygon fill="#A80036" points="513.5,382.793,503.5,386.793,513.5,390.793,509.5,386.793" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="507.5" x2="644" y1="386.793" y2="386.793"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="519.5" y="382.0508">EmployeeAccount</text><polygon fill="#A80036" points="774,412.1035,784,416.1035,774,420.1035,778,416.1035" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="502.5" x2="780" y1="416.1035" y2="416.1035"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="25" x="509.5" y="411.3613">new</text><polygon fill="#A80036" points="513.5,456.7246,503.5,460.7246,513.5,464.7246,509.5,460.7246" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="507.5" x2="790" y1="460.7246" y2="460.7246"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="519.5" y="440.6719">EmployeeAccount</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="519.5" y="455.9824">UserDetails</text><polygon fill="#A80036" points="353.5,501.3457,343.5,505.3457,353.5,509.3457,349.5,505.3457" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="347.5" x2="496.5" y1="505.3457" y2="505.3457"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="359.5" y="485.293">EmployeeAccount</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="359.5" y="500.6035">UserDetails</text><line style="stroke:#A80036;stroke-width:1.0;" x1="342.5" x2="384.5" y1="534.6563" y2="534.6563"/><line style="stroke:#A80036;stroke-width:1.0;" x1="384.5" x2="384.5" y1="534.6563" y2="547.6563"/><line style="stroke:#A80036;stroke-width:1.0;" x1="343.5" x2="384.5" y1="547.6563" y2="547.6563"/><polygon fill="#A80036" points="353.5,543.6563,343.5,547.6563,353.5,551.6563,349.5,547.6563" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="349.5" y="529.9141">セッションに格納</text><polygon fill="#A80036" points="39,572.9668,29,576.9668,39,580.9668,35,576.9668" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="33" x2="336.5" y1="576.9668" y2="576.9668"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="45" y="572.2246">リダイレクト</text><polygon fill="#A80036" points="212,602.2773,222,606.2773,212,610.2773,216,606.2773" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="28" x2="218" y1="606.2773" y2="606.2773"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="35" y="601.5352">menu()</text><polygon fill="#A80036" points="34,631.5879,24,635.5879,34,639.5879,30,635.5879" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="28" x2="228" y1="635.5879" y2="635.5879"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="40" y="630.8457">メニュー画面</text><!--MD5=[5fdb8511d0d5b195e94c069966e5819c]
@startuml
skin rose
skinparam shadowing false
hide empty methods
hide empty fields

title UC017: 社員アカウントログイン機能 シーケンス図
skinparam shadowing false
actor "user" as user
activate user
participant "Login\nController" as ctrl1
participant "Menu\nController" as ctrl2
participant "SpringSecurity" as sec
participant "EmployeeAccount\nUserDetailsService" as svc
participant "EmployeeAccount\nRepository" as repo
participant "EmployeeAccount\nUserDetails" as ud
database DB as db

user -> ctrl1 ++ : form()
ctrl1 -> user - - : ログイン画面
user -> sec ++ : 認証
sec -> svc ++ : loadUserByUsername\n(userName)
svc -> repo ++ : findByUserName\n(userName)
repo -> db ++ : SELECT文
db - -> repo - - : EmployeeAccount
repo - -> svc - - : EmployeeAccount
svc -> ud ++ : new
ud - -> svc - - : EmployeeAccount\nUserDetails
svc - -> sec - - : EmployeeAccount\nUserDetails
sec -> sec : セッションに格納
sec - -> user - - : リダイレクト
user -> ctrl2 ++ : menu()
ctrl2 - -> user - - : メニュー画面

deactivate user

@enduml

PlantUML version 1.2022.0(Wed Jan 12 01:16:42 JST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: ja
Country: JP
--></g></svg>